# AHC023

## 基本情報

- サイト: https://atcoder.jp/contests/ahc023

## 問題

### パラメータ

- Tヵ月作物を育てる(T=100)
- H×Wの土地(H=20, W=20)
- 農機の出入口は(i0, 0), (i0+1, 0)
- 土地の外周の柵から水路が出ている。水路の位置はhij, vij
- 水路は各土地からの距離1～4(シードによる)まで伸びている
- 作物はK種類(0 < K <= 40,000)
- 作物はSkヵ月目までに植え、Dヵ月目に収穫する必要がある
- スコア
  - 10^6*ΣXk/HWT
    - 計画に含まれていない: Xk = 0
    - 計画に含まれている: Xk = Dk-Sk+1

### サンプルコード

- read_input: 入力の読み込み
- adj配列: H×W×(int, int)
  - 移動可能な経路を構築(水路以外で左右上下が移動可能、逆向きも)
- plan配列: 出力
- 出力の作成
  - i, jを回して、正しいプランでなければ不採用。正しければ採用
- is_valid_plan(plan, adj)
  - planの植える時期と収穫時期を配列に入れる
  - t=1からTまで以下を判定
    - 植えることが可能か(農機が行けるか)
      - 同タイミングに植えるもの同士の順番は自動で最適化される
    - すでに植えてないか(used)
    - 収穫が可能か(農機が行けるか)
      - 同タイミングで収穫するもの同士の順番は自動で最適化されるため、すべて収穫した前提で判定すればよい
- reachable(i, j, adj, used)
  - 行先(i, j)か出入口(i0, 0)が使われていたらfalse
  - (i0, 0)に植えるならtrue
  - BFS(幅優先探索)で行先(i, j)に行けるかを確認


## 考察

- 基本的には植える期間が長く、収穫が遅いものほど遠くに植える
- 植える期間が短いものは、他の収穫がなければ、手前に植える
- 最初に植える必要があるものは、遠くに植える
- 経路が確保できるのであれば、期間が長い物を脇に植えるのもあり
- サンプルコードの計算量
  - kの数(10)*H(20)*W(20)*is_valid_plan*reachable=1,600,000,000
  - reachable: H*W=400
  - is_valid_plan: 作物を育てる期間(T=100)*planの数(10)*reachable(400)=400,000
- KがT*H*W以下のため、何度も植えたり収穫したりする方がよい

## ToDo

- サンプルコード実装(Done)
- 計算量確認(Done)
- class化(Done)
- 評価実装(Done)
- ファイル入出力(Done)
- 距離が遠いところに、Dが大きい物を順に植える。植える時期はすべて1日目(Done)
- v3をスコアが大きい順に植える⇒Dが大きい物を奥にしないと、エラーになる(Done)
- T=100を5分割して、その中で完結できる物だけ植えるのを5回実施する

## 履歴

- v1: サンプルコード実装(143,800)
- v2: kを20までに増加(292,150)
- v3: 1日目にすべて植えて、距離が遠いところにDが大きい物を順に植える(6,317,350)
- v4: v3でスコアが大きい順に植える(15,160,100, 3*10^5)
- v5: T=100を5分割して、その中で完結できる物だけ植えるのを5回実施する(, 4.8*10^5)
